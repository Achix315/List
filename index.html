<script>
// Fonction pour sauvegarder l'état des cases cochées dans localStorage
function saveCheckboxState() {
    const checkboxes = document.querySelectorAll('input[type="checkbox"]');
    checkboxes.forEach(checkbox => {
        localStorage.setItem(checkbox.id, checkbox.checked);
    });
}

// Fonction pour restaurer l'état des cases cochées depuis localStorage
function restoreCheckboxState() {
    const checkboxes = document.querySelectorAll('input[type="checkbox"]');
    checkboxes.forEach(checkbox => {
        const savedState = localStorage.getItem(checkbox.id);
        checkbox.checked = savedState === 'true'; // Rétablit l'état si sauvegardé
    });
}

// Restaurer l'état des cases cochées au chargement de la page
document.addEventListener('DOMContentLoaded', restoreCheckboxState);

// Ajouter un écouteur d'événement pour sauvegarder l'état à chaque changement
document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
    checkbox.addEventListener('change', saveCheckboxState);
});

// Ajouter un écouteur d'événement pour envoyer un message lorsque la case est cochée
document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
    checkbox.addEventListener('change', () => {
        if (checkbox.checked) {
            let listName = ""; // Variable pour le nom de la liste
            let itemText = checkbox.parentElement.textContent.trim(); // Texte de l'élément de la liste

            // Vérifie à quelle liste appartient la case cochée
            if (checkbox.closest('.emma-list')) {
                listName = "Emma"; // Liste Emma
            } else if (checkbox.closest('.victorien-list')) {
                listName = "Victorien"; // Liste Victorien
            }

            // Crée le message à envoyer sur Discord
            const data = {
                content: `La case de "${itemText}" dans la liste de ${listName} a été cochée !`
            };

            // Remplacez par l'URL de votre webhook
            const webhookUrl = "https://discord.com/api/webhooks/1310789633021313024/q-ZBPojw4DCqyFjf_gsbUG0UjUuz0swkYpHG7on1kW5Zg5p3HBpwbYXaXEBmVJWVO8va";

            // Envoi de la requête au webhook avec le message approprié
            fetch(webhookUrl, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data)
            }).catch(error => console.error('Erreur : ', error));
        }
    });
});
</script>
